{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":3,"numPassedTests":43,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":3,"numTotalTests":43,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1743404307825,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Role-based Access Control","hasPermissionInTenant"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control hasPermissionInTenant should return true when role has exact permission in tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true when role has exact permission in tenant"},{"ancestorTitles":["Role-based Access Control","hasPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control hasPermissionInTenant should return false when permission is in different tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when permission is in different tenant"},{"ancestorTitles":["Role-based Access Control","hasPermissionInTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control hasPermissionInTenant should return true for global type permission in tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true for global type permission in tenant"},{"ancestorTitles":["Role-based Access Control","hasPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control hasPermissionInTenant should return true for global role in any tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true for global role in any tenant"},{"ancestorTitles":["Role-based Access Control","createTenantAdminRole"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control createTenantAdminRole should create admin role with proper tenant context","invocations":1,"location":null,"numPassingAsserts":28,"retryReasons":[],"status":"passed","title":"should create admin role with proper tenant context"},{"ancestorTitles":["Role-based Access Control","createSuperAdminRole"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control createSuperAdminRole should create global admin role with system tenant","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create global admin role with system tenant"},{"ancestorTitles":["Role-based Access Control","Redis key generators"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control Redis key generators getRoleKey should include tenant ID","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"getRoleKey should include tenant ID"},{"ancestorTitles":["Role-based Access Control","Redis key generators"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control Redis key generators getUserRolesKey should include tenant ID","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"getUserRolesKey should include tenant ID"},{"ancestorTitles":["Role-based Access Control","Redis key generators"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control Redis key generators getTenantUsersKey should include tenant ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"getTenantUsersKey should include tenant ID"},{"ancestorTitles":["Role-based Access Control","convertToTenantACL"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Role-based Access Control convertToTenantACL should convert ACL to tenant ACL","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should convert ACL to tenant ACL"}],"endTime":1743404308952,"message":"","name":"C:\\Users\\T\\directorymonster\\src\\components\\admin\\auth\\utils\\__tests__\\roles.test.ts","startTime":1743404308483,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Access Control with Tenant Context","hasPermission"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context hasPermission should return true when user has exact permission in tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true when user has exact permission in tenant"},{"ancestorTitles":["Access Control with Tenant Context","hasPermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context hasPermission should return false when permission is in different tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when permission is in different tenant"},{"ancestorTitles":["Access Control with Tenant Context","hasPermission"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context hasPermission should return true for site-wide permission in correct tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true for site-wide permission in correct tenant"},{"ancestorTitles":["Access Control with Tenant Context","hasPermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context hasPermission should return true for tenant-wide permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true for tenant-wide permission"},{"ancestorTitles":["Access Control with Tenant Context","grantPermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context grantPermission should add permission with tenant context","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should add permission with tenant context"},{"ancestorTitles":["Access Control with Tenant Context","grantPermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context grantPermission should not add duplicate permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not add duplicate permission"},{"ancestorTitles":["Access Control with Tenant Context","revokePermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context revokePermission should remove permission with matching tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should remove permission with matching tenant"},{"ancestorTitles":["Access Control with Tenant Context","revokePermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context revokePermission should not remove permission with non-matching tenant","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not remove permission with non-matching tenant"},{"ancestorTitles":["Access Control with Tenant Context","createSiteAdminACL"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context createSiteAdminACL should create ACL with site permissions in tenant context","invocations":1,"location":null,"numPassingAsserts":16,"retryReasons":[],"status":"passed","title":"should create ACL with site permissions in tenant context"},{"ancestorTitles":["Access Control with Tenant Context","createTenantAdminACL"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context createTenantAdminACL should create ACL with tenant-wide permissions","invocations":1,"location":null,"numPassingAsserts":38,"retryReasons":[],"status":"passed","title":"should create ACL with tenant-wide permissions"},{"ancestorTitles":["Access Control with Tenant Context","createSuperAdminACL"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context createSuperAdminACL should create ACL with system-level permissions","invocations":1,"location":null,"numPassingAsserts":39,"retryReasons":[],"status":"passed","title":"should create ACL with system-level permissions"},{"ancestorTitles":["Access Control with Tenant Context","detectCrossTenantAccess"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context detectCrossTenantAccess should detect when ACL references multiple non-system tenants","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect when ACL references multiple non-system tenants"},{"ancestorTitles":["Access Control with Tenant Context","detectCrossTenantAccess"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context detectCrossTenantAccess should allow system tenant references","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow system tenant references"},{"ancestorTitles":["Access Control with Tenant Context","getReferencedTenants"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Access Control with Tenant Context getReferencedTenants should return all tenant IDs referenced in ACL","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return all tenant IDs referenced in ACL"}],"endTime":1743404308960,"message":"","name":"C:\\Users\\T\\directorymonster\\src\\components\\admin\\auth\\utils\\__tests__\\accessControl.test.ts","startTime":1743404308483,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Tenant Access Control","hasPermissionInTenant"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasPermissionInTenant should return false if user is not a tenant member","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return false if user is not a tenant member"},{"ancestorTitles":["Tenant Access Control","hasPermissionInTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasPermissionInTenant should check role service if user is a tenant member","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should check role service if user is a tenant member"},{"ancestorTitles":["Tenant Access Control","hasPermissionInTenant"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasPermissionInTenant should handle errors gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle errors gracefully"},{"ancestorTitles":["Tenant Access Control","hasAnyPermissionInTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasAnyPermissionInTenant should return false if user is not a tenant member","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return false if user is not a tenant member"},{"ancestorTitles":["Tenant Access Control","hasAnyPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasAnyPermissionInTenant should return true if user has any of the permissions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return true if user has any of the permissions"},{"ancestorTitles":["Tenant Access Control","hasAnyPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasAnyPermissionInTenant should return false if user has none of the permissions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if user has none of the permissions"},{"ancestorTitles":["Tenant Access Control","hasAllPermissionsInTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasAllPermissionsInTenant should return false if user is not a tenant member","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return false if user is not a tenant member"},{"ancestorTitles":["Tenant Access Control","hasAllPermissionsInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasAllPermissionsInTenant should return true if user has all permissions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return true if user has all permissions"},{"ancestorTitles":["Tenant Access Control","hasAllPermissionsInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasAllPermissionsInTenant should return false if user is missing any permission","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if user is missing any permission"},{"ancestorTitles":["Tenant Access Control","getAccessibleResourcesInTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control getAccessibleResourcesInTenant should return empty array if user is not a tenant member","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return empty array if user is not a tenant member"},{"ancestorTitles":["Tenant Access Control","getAccessibleResourcesInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control getAccessibleResourcesInTenant should return resource IDs user has permission for","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return resource IDs user has permission for"},{"ancestorTitles":["Tenant Access Control","getAccessibleResourcesInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control getAccessibleResourcesInTenant should filter out resources with different permissions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should filter out resources with different permissions"},{"ancestorTitles":["Tenant Access Control","getAccessibleResourcesInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control getAccessibleResourcesInTenant should filter out resources in different tenants","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should filter out resources in different tenants"},{"ancestorTitles":["Tenant Access Control","getAccessibleResourcesInTenant"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control getAccessibleResourcesInTenant should include resources from global roles","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should include resources from global roles"},{"ancestorTitles":["Tenant Access Control","hasGlobalPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasGlobalPermissionInTenant should return false if user is not a tenant member","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return false if user is not a tenant member"},{"ancestorTitles":["Tenant Access Control","hasGlobalPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasGlobalPermissionInTenant should return true if user has global permission for resource type","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return true if user has global permission for resource type"},{"ancestorTitles":["Tenant Access Control","hasGlobalPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasGlobalPermissionInTenant should return false if user has only specific resource permissions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false if user has only specific resource permissions"},{"ancestorTitles":["Tenant Access Control","hasGlobalPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasGlobalPermissionInTenant should return true if user has global role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true if user has global role"},{"ancestorTitles":["Tenant Access Control","hasGlobalPermissionInTenant"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tenant Access Control hasGlobalPermissionInTenant should check for correct permission type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should check for correct permission type"}],"endTime":1743404308968,"message":"","name":"C:\\Users\\T\\directorymonster\\src\\components\\admin\\auth\\utils\\__tests__\\tenantAccessControl.test.ts","startTime":1743404308483,"status":"passed","summary":""}],"wasInterrupted":false}
