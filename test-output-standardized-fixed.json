{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":0,"numPassedTests":5,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":6,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1743456003478,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Authentication Middleware","withAuthentication"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware withAuthentication should reject requests without authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject requests without authentication"},{"ancestorTitles":["Authentication Middleware","withAuthentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware withAuthentication should reject requests with invalid token format","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject requests with invalid token format"},{"ancestorTitles":["Authentication Middleware","withAuthentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware withAuthentication should reject requests with invalid token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should reject requests with invalid token"},{"ancestorTitles":["Authentication Middleware","withAuthentication"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware withAuthentication should allow requests with valid token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should allow requests with valid token"},{"ancestorTitles":["Authentication Middleware","withAuthentication"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware withAuthentication should handle token verification errors","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle token verification errors"},{"ancestorTitles":["Authentication Middleware","withAuthentication"],"duration":2,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"error\": \"Authentication failed\"}, ObjectContaining {\"status\": 500}\nReceived: {\"error\": \"Invalid token\", \"message\": \"Authentication token is invalid or expired\"}, {\"status\": 401}\n\nNumber of calls: 1","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: ObjectContaining {\"error\": \"Authentication failed\"}, ObjectContaining {\"status\": 500}\nReceived: {\"error\": \"Invalid token\", \"message\": \"Authentication token is invalid or expired\"}, {\"status\": 401}\n\nNumber of calls: 1\n    at Object.toHaveBeenCalledWith (C:\\Users\\T\\directorymonster\\tests\\api\\middleware\\auth-middleware-standardized.test.ts:189:33)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Authentication Middleware withAuthentication should handle unexpected errors in the handler","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should handle unexpected errors in the handler"}],"endTime":1743456004337,"message":"  ● Authentication Middleware › withAuthentication › should handle unexpected errors in the handler\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"error\": \"Authentication failed\"}, ObjectContaining {\"status\": 500}\n    Received: {\"error\": \"Invalid token\", \"message\": \"Authentication token is invalid or expired\"}, {\"status\": 401}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m       \u001b[90m// The implementation returns a 500 error with 'Authentication failed' message\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[90m// when an unexpected error occurs\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m       expect(\u001b[33mNextResponse\u001b[39m\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({ error\u001b[33m:\u001b[39m \u001b[32m'Authentication failed'\u001b[39m })\u001b[33m,\u001b[39m\n     \u001b[90m 191 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({ status\u001b[33m:\u001b[39m \u001b[35m500\u001b[39m })\n     \u001b[90m 192 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (tests/api/middleware/auth-middleware-standardized.test.ts:189:33)\n","name":"C:\\Users\\T\\directorymonster\\tests\\api\\middleware\\auth-middleware-standardized.test.ts","startTime":1743456003913,"status":"failed","summary":""}],"wasInterrupted":false}
